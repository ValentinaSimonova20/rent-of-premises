<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3" class="h-100">
<head>
    <meta charset="UTF-8">
    <title>Client page</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <link rel="stylesheet"
          th:href="@{main.css}"/>

</head>
<body class="d-flex flex-column h-100">

<div th:replace="~{fragments/navigation :: navigation}"></div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

<table>
    <thead>
    <tr>
        <th>Помещение</th>
        <th>Дополнительная информация</th>
        <th>Месяцев</th>
        <th>Лет</th>
        <th>цена/месяц</th>
        <div th:switch="${role}">
            <th th:case="'MANAGER'">Арендатор</th>
        </div>
        <th>Статус</th>
        <div th:switch="${role}">
            <th th:case="'MANAGER'">Подтверждение</th>
        </div>

    </tr>
    </thead>
    <tbody>
    <tr th:each="app : ${apps}">
        <td><a href="#" th:href="@{'/areas/'+${app.getPremises().getId()}+'/show'}" th:text="${app.getPremises().getName()}">Название</a></td>
        <td th:text="${app.getAdditionalInfo()}">Доп инф</td>
        <td th:text="${app.getRentalPeriodMonth()}">Месяцев</td>
        <td th:text="${app.getRentalPeriodYears()}">Лет</td>


        <td th:text="${app.getPremises().getPrice()}">Цена</td>
        <div th:switch="${role}">
            <td><a th:case="'MANAGER'" th:href="@{'/clientInfo/'+${app.getClient().getId()}+'/show'}" th:text="${app.getClient().getName()}+' '+${app.getClient().getSurname()}">фио</a></td>
        </div>

        <div th:switch="${role}">
            <div class="form-group blu-margin" th:case="'MANAGER'">
                <form th:action="@{'/app/' + ${app.id} + '/changeStat'} " method="post">
                <td>

                    <select class="form-control" th:name="stat"  id="dropOperator">
                        <option th:each="status : ${statuses}" th:value="${status}" th:text="${status.getName()}" th:selected="${status==app.getStatus()}"></option>
                    </select>

                </td>

                <td>

                    <button type="submit" class="btn btn-primary">Подтвердить изменение</button>

                </td>
                </form>
            </div>
            <div class="form-group blu-margin" th:case="'USER'">
                <td th:text="${app.getStatus().getName()}">Статус</td>
            </div>
        </div>
    </tr>
    </tbody>
</table>
<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>